_array = [   "WoodPile_F.p3d",   "Timbers_F.p3d",   "Bricks_V1_F.p3d",    "Bricks_V2_F.p3d",    "Bricks_V3_F.p3d",    "Bricks_V4_F.p3d",    "CinderBlocks_F.p3d",     "IronPipes_F.p3d",   "Pipes_large_F.p3d",   "Pipes_small_F.p3d",   "WoodenBox_F.p3d",   "WorkStand_F.p3d",   "Pallet_F.p3d",   "Pallet_vertical_F.p3d",    "Pallets_F.p3d",     "Garbage_line_F.p3d",   "Garbage_square3_F.p3d",   "Garbage_square5_F.p3d",   "GarbageBags_F.p3d",   "GarbagePallet_F.p3d",    "GarbageWashingMachine_F.p3d",   "JunkPile_F.p3d",   "Tyre_F.p3d",   "Tyres_F.p3d",   "CratesWooden_F.p3d",   "MarketShelter_F.p3d",   "Sack_F.p3d",    "Sacks_goods_F.p3d",    "WoodenCart_F.p3d",   "CargoBox_V1_F.p3d",   "Cargo20_blue_F.p3d",   "Cargo20_brick_red_F.p3d",   "Cargo20_cyan_F.p3d",   "Cargo20_grey_F.p3d",   "Cargo20_light_blue_F.p3d",   "Cargo20_light_green_F.p3d",   "Cargo20_military_green_F.p3d",   "Cargo20_orange_F.p3d",   "Cargo20_red_F.p3d",   "Cargo20_sand_F.p3d",   "Cargo20_white_F.p3d",   "Cargo20_yellow_F.p3d",   "Cargo40_blue_F.p3d",   "Cargo40_brick_red_F.p3d",   "Cargo40_cyan_F.p3d",   "Cargo40_grey_F.p3d",   "Cargo40_light_blue_F.p3d",   "Cargo40_light_green_F.p3d",   "Cargo40_military_green_F.p3d",   "Cargo40_orange_F.p3d",   "Cargo40_red_F.p3d",   "Cargo40_sand_F.p3d",   "Cargo40_white_F.p3d",   "Cargo40_yellow_F.p3d",   "BagFence_Corner_F.p3d",   "BagFence_End_F.p3d",   "BagFence_Long_F.p3d",   "BagFence_Round_F.p3d",   "BagFence_Short_F.p3d",   "HBarrier_1_F.p3d",   "HBarrier_3_F.p3d",   "HBarrier_5_F.p3d",   "HBarrierBig_F.p3d",   "HBarrierTower_F.p3d",   "Razorwire_F.p3d",    "Shoot_House_Wall_F.p3d",   "Shoot_House_Wall_Stand_F.p3d",   "Shoot_House_Wall_Crouch_F.p3d",   "Shoot_House_Wall_Prone_F.p3d",   "Shoot_House_Wall_Long_F.p3d",   "Shoot_House_Wall_Long_Stand_F.p3d",   "Shoot_House_Wall_Long_Prone_F.p3d",   "Shoot_House_Panels_F.p3d",   "Shoot_House_Panels_Vault_F.p3d",   "Obstacle_Climb_F.p3d",   "Obstacle_Cross_F.p3d",   "Obstacle_RunAround_F.p3d",   "Obstacle_Saddle_F.p3d",   "Metal_Pole_F.p3d",   "Metal_Pole_Platform_F.p3d",   "Metal_Pole_Skeet_F.p3d",   "RowBoat_V1_F.p3d",   "RowBoat_V2_F.p3d",   "RowBoat_V3_F.p3d",   "Ancient_Wall_4m_F.p3d",   "Ancient_Wall_8m_F.p3d",   "BarGate_F.p3d",   "Canal_Wall_10m_F.p3d",   "Canal_Wall_D_center_F.p3d",   "Canal_Wall_D_left_F.p3d",   "Canal_Wall_D_right_F.p3d",   "Canal_Wall_Stairs_F.p3d",   "Canal_WallSmall_10m_F.p3d",   "City_4m_F.p3d",   "City_8m_F.p3d",   "City_8mD_F.p3d",   "City_Gate_F.p3d",   "City_Pillar_F.p3d",   "City2_4m_F.p3d",   "City2_8m_F.p3d",   "City2_PillarD_F.p3d",   "CncBarrier_F.p3d",   "CncBarrier_stripes_F.p3d",   "CncBarrierMedium_F.p3d",   "CncBarrierMedium4_F.p3d",   "CncShelter_F.p3d",   "CncWall1_F.p3d",   "CncWall4_F.p3d",   "Crash_barrier_F.p3d",   "Mil_ConcreteWall_F.p3d",   "Mil_WallBig_4m_F.p3d",   "Mil_WallBig_Corner_F.p3d",   "Mil_WallBig_Gate_F.p3d",   "Mil_WiredFence_F.p3d",   "Net_Fence_8m_F.p3d",   "Net_Fence_Gate_F.p3d",   "Net_FenceD_8m_F.p3d",   "New_WiredFence_5m_F.p3d",   "New_WiredFence_10m_Dam_F.p3d",   "New_WiredFence_10m_F.p3d",   "Pipe_Fence_4m_F.p3d",   "Pipe_Fence_4mNoLC_F.p3d",   "PipeWall_concretel_8m_F.p3d",   "Slums01_8m.p3d",   "Slums02_4m.p3d",   "SportGround_Fence_F.p3d",   "Stone_4m_F.p3d",   "Stone_8m_F.p3d",   "Stone_8mD_F.p3d",   "Stone_Gate_F.p3d",   "Wall_IndCnc_2deco_F.p3d",   "Wall_IndCnc_4_D_F.p3d",   "Wall_IndCnc_4_F.p3d",   "Wall_Tin_4.p3d",   "Wall_Tin_4_2.p3d",   "Wired_Fence_4m_F.p3d",   "Wired_Fence_4mD_F.p3d",   "Wired_Fence_8m_F.p3d",   "Wired_Fence_8mD_F.p3d",   "WoodenLog_F.p3d",     "WoodenTable_large_F.p3d",   "WoodenTable_small_F.p3d",   "Bench_F.p3d",   "ChairWood_F.p3d",   "Metal_wooden_rack_F.p3d",   "Rack_F.p3d",   "ShelvesWooden_blue_F.p3d",   "TableDesk_F.p3d",   "HeatPump_F.p3d",   "Metal_rack_F.p3d",   "Metal_rack_Tall_F.p3d",   "ShelvesMetal_F.p3d",   "Metal_Shed_ruins_F.p3d",   "Cargo20_color_V1_ruins_F.p3d",   "Cargo20_color_V2_ruins_F.p3d",   "Cargo20_color_V3_ruins_F.p3d",   "Cargo20_china_color_V1_ruins_F.p3d",   "Cargo20_china_color_V2_ruins_F.p3d",   "Cargo20_military_ruins_F.p3d",   "Cargo40_color_V1_ruins_F.p3d",   "Cargo40_color_V2_ruins_F.p3d",   "Cargo40_color_V3_ruins_F.p3d",   "Cargo40_china_color_V1_ruins_F.p3d",   "Cargo40_china_color_V2_ruins_F.p3d",   "Cargo40_military_ruins_F.p3d",   "cmp_Hopper_ruins_F.p3d",   "Factory_Conv1_Main_ruins_F.p3d",   "Factory_Conv2_ruins_F.p3d",   "Factory_Hopper_ruins_F.p3d",   "ReservoirTank_Airport_ruins_F.p3d",   "ReservoirTank_Rust_ruins_F.p3d",   "ReservoirTank_V1_ruins_F.p3d",   "ReservoirTower_ruins_F.p3d",   "Shed_Big_ruins_F.p3d",   "Shed_Small_ruins_F.p3d",   "Shed_Ind_ruins_F.p3d",   "TTowerBig_1_ruins_F.p3d",   "TTowerBig_2_ruins_F.p3d",   "Land PowerGenerator F.p3d",   "BarrelWater_F.p3d",   "WaterBarrel_F.p3d",   "WaterTank_F.p3d",   "CanisterFuel_F.p3d",   "CanisterOil_F.p3d",   "MetalBarrel_F.p3d",   "Cargo_House_V1_ruins_F.p3d",   "Cargo_House_V2_ruins_F.p3d",   "Cargo_House_V3_ruins_F.p3d",   "Cargo_HQ_V1_ruins_F.p3d",   "Cargo_HQ_V2_ruins_F.p3d",   "Cargo_HQ_V3_ruins_F.p3d",   "Cargo_Patrol_V1_ruins_F.p3d",   "Cargo_Patrol_V2_ruins_F.p3d",   "Cargo_Patrol_V3_ruins_F.p3d",   "Cargo_Tower_V1_ruins_F.p3d",   "Cargo_Tower_V2_ruins_F.p3d",   "Cargo_Tower_V3_ruins_F.p3d","cargo10_grey_f.p3d",   "Medevac_house_V1_ruins_F.p3d",   "Medevac_HQ_V1_ruins_F.p3d",   "GarbageContainer_closed_F.p3d",   "GarbageContainer_open_F.p3d",   "ShelvesWooden_F.p3d",   "ShelvesWooden_khaki_F.p3d",   "BarrelWater_grey_F.p3d",   "Sunshade_01_F.p3d",   "Sunshade_02_F.p3d",   "Sunshade_03_F.p3d",  "sunshade_f.p3d", "Sunshade_04_F.p3d",   "GarbageBarrel_01_F.p3d",   "GarbageBin_01_F.p3d",   "Sign_Mines_F.p3d",   "Sign_WarningMilAreaSmall_F.p3d",   "Sign_WarningMilitaryArea_F.p3d",   "Sign_WarningMilitaryVehicles_F.p3d",   "Sign_WarningUnexplodedAmmo_F.p3d",   "Sign_Direction_F.p3d",   "FlagChecked_F.p3d",   "FlagSmall_F.p3d",   "Sign_F.p3d",   "RoadCone_L_F.p3d",   "RoadBarrier_F.p3d",   "RoadBarrier_small_F.p3d",   "Pole_F.p3d",   "TapeSign_F.p3d",   "ArrowDesk_L_F.p3d",   "ArrowDesk_R_F.p3d",   "ArrowMarker_R_F.p3d",   "ArrowMarker_L_F.p3d",   "SignAd_Sponsor_F.p3d",   "SignAd_Sponsor_Vrana_F.p3d",   "SignAd_Sponsor_ARMEX_F.p3d",   "SignAd_Sponsor_Quontrol_F.p3d",   "SignAd_Sponsor_ION_F.p3d",   "SignAd_Sponsor_Larkin_F.p3d",   "SignAd_SponsorS_F.p3d",   "SignAd_SponsorS_Vrana_F.p3d",   "SignAd_SponsorS_ARMEX_F.p3d",   "SignAd_SponsorS_Quontrol_F.p3d",   "SignAd_SponsorS_ION_F.p3d",   "SignAd_SponsorS_Larkin_F.p3d",   "UWreck_FishingBoat_F.p3d",   "UWreck_Heli_Attack_02_F.p3d",   "UWreck_MV22_F.p3d",   "Wreck_BMP2_F.p3d",   "Wreck_BRDM2_F.p3d",   "Wreck_Car_F.p3d",   "Wreck_Car2_F.p3d",   "Wreck_Car3_F.p3d",   "Wreck_CarDismantled_F.p3d",   "Wreck_Heli_Attack_01_F.p3d",   "Wreck_Heli_Attack_02_F.p3d",   "Wreck_HMMWV_F.p3d",   "Wreck_Hunter_F.p3d",   "Wreck_Offroad_F.p3d",   "Wreck_Offroad2_F.p3d",   "Wreck_Plane_Transport_01_F.p3d",   "Wreck_Skodovka_F.p3d",   "Wreck_Slammer_F.p3d",   "Wreck_Slammer_hull_F.p3d",   "Wreck_Slammer_turret_F.p3d",   "Wreck_T72_hull_F.p3d",   "Wreck_T72_turret_F.p3d",   "Wreck_Traw_F.p3d",   "Wreck_Traw2_F.p3d",   "Wreck_Truck_dropside_F.p3d",   "Wreck_Truck_F.p3d",   "Wreck_UAZ_F.p3d",   "Wreck_Ural_F.p3d",   "Wreck_Van_F.p3d",   "Scrap_MRAP_01_F.p3d",   "ScrapHeap_1_F.p3d",   "ScrapHeap_2_F.p3d",   "cages_f.p3d", "bucket_f.p3d", "sacks_heap_f.p3d"];  
																																		//^array of all interactable objects^(should be moved to another file)
_arraylength = (count _array-1); 																										// Nr of objects in array 
debug = true;						 																									// turn debug messages on
getact = 0;	
ahction = 0;
draw = 0;
_detect = false;
_fobject = "some.p3d";

//////// TOOL ALLOCATION ////////

// tool alloc
_axe = "Exile_Melee_Axe";
_canopener = "Exile_Item_CanOpener";
_hammer = "Exile_Item_Hammer";
_knife = "Exile_Item_Knife";
_saw = "Exile_Item_Handsaw";
_pliers = "Exile_Item_Pliers";
_grinder = "Exile_Item_Grinder";
_foolbox = "Exile_Item_Foolbox";
_Cordlessscrewdriver = "Exile_Item_CordlessScrewdriver";
_screwdriver = "Exile_Item_Screwdriver";
_matches = "Exile_Item_Matches";
_xm8 = "Exile_Item_XM8";

// item alloc

// medic
_bandage = "Exile_Item_Bandage";
_instadoc = "Exile_Item_InstaDoc";
_vishprin = "Exile_Item_Vishpirin";
_defi = "Exile_Item_Defibrillator";
_heatpack = "Exile_Item_Heatpack";

//food and drinks
_snack1 = "Exile_Item_Cheathas";
_snack2 = "Exile_Item_CockONut";
_snack3 = "Exile_Item_BeefParts";
_snack4 = "Exile_Item_Noodles";
_snack5 = "Exile_Item_DsNuts";
_snack6 = "Exile_Item_InstantCoffee";
_snack7 = "Exile_Item_Moobar";
_snack8 = "Exile_Item_SeedAstics";

_bin6 = "Exile_Item_Surstromming";
_bin5 = "Exile_Item_SausageGravy";
_bin4 = "Exile_Item_GloriousKnakworst";
_bin3 = "Exile_Item_DogFood";
_bin2 = "Exile_Item_ChristmasTinner";
_bin1 = "Exile_Item_Catfood";

_food1 = "Exile_Item_EMRE";

_drink0 = "Exile_Item_PlasticBottleEmpty";
_drink1 = "Exile_Item_Energydrink";
_drink2 = "Exile_Item_Beer";
_drink3 = "Exile_Item_MountainDupe";
_drink4 = "Exile_Item_PlasticBottleCoffee";
_drink5 = "Exile_Item_PlasticBottleDirtyWater";
_drink6 = "Exile_Item_PlasticBottleFreshWater";
_drink7 = "Exile_Item_PlasticBottleSaltWater";
_drink8 = "Exile_Item_PowerDrink";

// etc

_magazine1  = "Exile_Item_Magazine01";
_magazine2  = "Exile_Item_Magazine02";
_magazine3  = "Exile_Item_Magazine03";
_screws = "Exile_Item_MetalScrews";
_tent = "Exile_Item_CamoTentKit";
_junk1 = "Exile_Item_Can_Empty";
_junk2 = "Exile_Item_ToiletPaper";

// crafting stuff

_lock = "Item_Item_Codelock";
_pot = "Exile_Item_CookingPot";
_tape = "Exile_Item_DuctTape";
_cord = "Exile_Item_ExtensionCord";
_toolbox = "Exile_Item_Foolbox";
_canister0 = "Exile_Item_FuelCanisterEmpty";
_canister1 = "Exile_Item_FuelCanister_Full";
_metaljunk = "Exile_Item_JunkMetal";
_metalboard = "Exile_Item_MetalBoard";
_metalpole = "Exile_Item_MetalPole";
_wire = "Exile_Item_MetalWire";
_bulb = "Exile_Item_LightBulb";
_rope = "Exile_Item_Rope";
_woodlog = "Exile_Item_WoodLog";
_woodplank = "Exile_Item_WoodPlank";
_ziptie = "Exile_Item_ZipTie";


// gear
_gasmask = "Exile_Headgear_GasMask";


//////// END OF TOOL ALLOCATION ////////
																					// init with no action available
if(debug)then{systemchat format ["Init with: %1 Objects",(str _arraylength)];};															// debug out : inittext/objects in array	
while{alive player}do{																													// do it endless ?could impact perfomance?
_cursorObject = cursorObject;																											// define cursorObject  ?obsolete?
_player = player;																														// define player for his actual position etc.
	if(debug)then{systemchat format ["Still running - getact %1 on Object %2 ",(str getact),(getModelinfo cursorObject select 0)];};	// debug out : active action?/modelname of cursor
	if(!(isNull cursorObject) && (_player distance cursorObject <= 10))then																// Have something on the cursor and is near to player
	{
		_actionModel = getModelinfo (cursorObject) select 0;																			// get the modelname(.p3d)
		if(debug)then{systemchat format ["detected cursorObject: %1",(str _actionModel)];};												// debug out : modelname
			for "_i" from 0 to _arraylength do  																						// check cursor against array
			{   
				if(_actionModel == _array select _i)then																				// cursor is type of array
				{
					_detect = true;
					_fobject = _array select _i;
					
																																		// debug out : arrays modelname 	
				};	
			};
			if(_detect)then
			{
				if(getact == 1)then{}else{																								// which model from array has been found
					if(debug)then{systemchat format ["GOOD cursorObject: %1",(str _fobject)];};
					ahction = player addAction["Look","wim\interactions\look.sqf",_fobject];											// add the action to the player
					draw = addMissionEventHandler ["Draw3D", {																				 
					drawIcon3D ["", [1,0,0,1], position cursorObject, 0, 0, 0, "Use", 1, 0.05, "PuristaMedium"];						// draw a text at cursorObject position
					}];
					getact = 1;
					};
			}
			else
			{
				if(debug)then{systemchat format ["no detection hit in array - cleanup"];};												// debug : cleanup
				player removeAction ahction;																							// cleanup the existing action
				removeMissionEventHandler ["Draw3D",draw];																				// cleanup the 3d text
				getact = 0;																												// set to no active action
			};
			if(_fobject != (getModelinfo cursorObject select 0))then{getact=0;};
			if(getact == 0)then
			{
			if(debug)then{systemchat format ["no hit in array - cleanup"];};		
			player removeAction ahction;																								// cleanup the existing action
			removeMissionEventHandler ["Draw3D",draw];	
			};
	}
	else
	{		
		if(debug)then{systemchat format ["no cursorObject in range - cleanup"];};		
		player removeAction ahction;																									// cleanup the existing action
		removeMissionEventHandler ["Draw3D",draw];																						// cleanup the 3d text
		getact = 0;
		_detect = false;																												// set to no active action
	};
};